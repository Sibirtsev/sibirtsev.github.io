<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Harmony Navigator ‚Äî Guitar Tools</title>
    <link rel="stylesheet" href="styles.css?version=6211bf6d914f5682ff4a0e248fac5d6664e35b9f">
</head>

<body>
    <header>
        <div class="container header-row">
            <div>
                <h1 id="title">Harmony Navigator</h1>
                <div class="sub" id="subtitle">Scales ‚Ä¢ Chord functions ‚Ä¢ Cadences ‚Ä¢ Key relationships
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 16px;">
                <a href="chords-finder.html" class="lang-toggle-btn" style="text-decoration: none; color: var(--text);"
                    title="Back to Guitar Tools">üé∏ Tools</a>
                <div class="lang">
                    <button id="langToggle" class="lang-toggle-btn" data-lang="en" title="Switch language">EN</button>
                    <!-- hidden alias for pages that expect id="langSelect" -->
                    <select id="langSelect"
                        style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
                        <option value="en">English</option>
                        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                    </select>
                    <div class="theme-control" style="display:inline-flex;align-items:center;margin-left:10px;gap:8px;">
                        <div class="theme-seg" role="tablist" aria-label="Theme chooser">
                            <button class="seg-btn" data-mode="system" aria-pressed="false" title="Follow system theme"
                                aria-label="System theme">
                                <!-- computer icon -->
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="12" rx="2" ry="2"></rect>
                                    <path d="M8 20h8"></path>
                                </svg>
                            </button>
                            <button class="seg-btn" data-mode="light" aria-pressed="false" title="Light theme"
                                aria-label="Light theme">
                                <!-- sun icon -->
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="4"></circle>
                                    <path d="M12 2v2"></path>
                                    <path d="M12 20v2"></path>
                                    <path d="M4.93 4.93l1.41 1.41"></path>
                                    <path d="M17.66 17.66l1.41 1.41"></path>
                                    <path d="M2 12h2"></path>
                                    <path d="M20 12h2"></path>
                                    <path d="M4.93 19.07l1.41-1.41"></path>
                                    <path d="M17.66 6.34l1.41-1.41"></path>
                                </svg>
                            </button>
                            <button class="seg-btn" data-mode="dark" aria-pressed="false" title="Dark theme"
                                aria-label="Dark theme">
                                <!-- moon icon -->
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                            </button>
                        </div>
                        <select id="themeSelect" aria-label="Theme"
                            style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
                            <option value="system">System</option>
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Key Selection Controls -->
        <section class="mt">
            <div class="two-column-grid">
                <!-- Left: Selection Form -->
                <div class="card">
                    <div class="body">
                        <h2 id="selectionFormLabel">Key Selection</h2>

                        <!-- Note and Accidental Selection -->
                        <div style="margin-bottom: 24px;">
                            <label class="small" style="display: block; margin-bottom: 8px; font-weight: 600;"
                                id="noteLabel">Note</label>
                            <div style="display: flex; gap: 12px; align-items: center;">
                                <select id="noteSelect" style="flex: 0 0 auto; min-width: 80px;">
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                    <option value="G">G</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                </select>

                                <div class="accidental-buttons" style="display: flex; gap: 4px;">
                                    <button type="button" class="acc-btn active" data-acc="natural"
                                        title="Natural">‚ôÆ</button>
                                    <button type="button" class="acc-btn" data-acc="sharp" title="Sharp">#</button>
                                    <button type="button" class="acc-btn" data-acc="flat" title="Flat">‚ô≠</button>
                                </div>
                            </div>
                        </div>

                        <!-- Scale/Mode Selection -->
                        <div>
                            <label class="small" style="display: block; margin-bottom: 8px; font-weight: 600;"
                                id="scaleLabel">Scale / Mode</label>
                            <select id="mode" style="width: 100%;"></select>
                        </div>
                    </div>
                </div>

                <!-- Right: Scale Information -->
                <div class="card">
                    <div class="body">
                        <h2 id="scaleInfoLabel">Scale Information</h2>

                        <div class="scale-info-grid"
                            style="display: grid; grid-template-columns: auto 1fr; gap: 8px 16px; margin-bottom: 20px;">
                            <span class="small" style="font-weight: 600;" id="tonicInfoLabel">Tonic:</span>
                            <span id="tonicValue">C</span>

                            <span class="small" style="font-weight: 600;" id="familyInfoLabel">Family:</span>
                            <span id="familyValue">Major</span>

                            <span class="small" style="font-weight: 600;" id="formulaInfoLabel">Formula:</span>
                            <span id="formulaValue"
                                title="Semitone intervals between consecutive notes">2-2-1-2-2-2-1</span>

                            <span class="small" style="font-weight: 600;" id="degreesInfoLabel">Degrees:</span>
                            <span id="degreesValue">1 2 3 4 5 6 7</span>
                        </div>

                        <!-- Scale Notes -->
                        <div style="margin-bottom: 20px;">
                            <div class="small" style="font-weight: 600; margin-bottom: 8px;" id="notesInfoLabel">Notes:
                            </div>
                            <div class="chips" id="scale-notes-display"></div>
                        </div>

                        <!-- Play Button -->
                        <button id="playScaleBtn" class="play-btn"
                            style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polygon points="5,3 19,12 5,21"></polygon>
                            </svg>
                            <span id="playBtnText">Play Scale</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>



        <!-- Diatonic Chords Table -->
        <section class="mt">
            <div class="card">
                <div class="body">
                    <h2 id="chordsLabel">Diatonic Chords and Functions</h2>
                    <div class="table-responsive" style="overflow-x: auto;">
                        <table class="chords-table"
                            style="width: 100%; border-collapse: separate; border-spacing: 0 8px; font-size: 14px;">
                            <thead>
                                <tr style="color: var(--muted);">
                                    <th style="text-align: left; padding: 6px 8px;" id="degreeHeader">Degree</th>
                                    <th style="text-align: left; padding: 6px 8px;" id="romanHeader">Roman</th>
                                    <th style="text-align: left; padding: 6px 8px;" id="functionHeader">Function</th>
                                    <th style="text-align: left; padding: 6px 8px;" id="triadHeader">Triad</th>
                                    <th style="text-align: left; padding: 6px 8px;" id="seventhHeader">Seventh</th>
                                    <th style="text-align: left; padding: 6px 8px;" id="tensionsHeader">Tensions</th>
                                </tr>
                            </thead>
                            <tbody id="chords-body">
                            </tbody>
                        </table>
                    </div>

                    <!-- Function abbreviations explanation -->
                    <div id="function-legend" class="small"
                        style="margin-top: 16px; padding: 12px; background: var(--background-secondary); border-radius: 6px; line-height: 1.4;">
                    </div>
                </div>
            </div>
        </section>

        <!-- Cadences -->
        <section class="mt">
            <div class="card">
                <div class="body">
                    <h2 id="cadencesLabel">Cadences (in selected key)</h2>
                    <div id="cadences" class="mt"></div>
                </div>
            </div>
        </section>

        <!-- Related Keys -->
        <section class="mt">
            <div class="card">
                <div class="body">
                    <h2 id="relatedKeysLabel">Modulations and Related Keys</h2>
                    <div id="related" class="mt"></div>
                </div>
            </div>
        </section>



        <div class="foot" id="footer"></div>
    </main>

    <style>
        .accidental-buttons {
            display: flex;
            gap: 4px;
        }

        .acc-btn {
            padding: 8px 12px;
            border: 1px solid var(--fret);
            background: var(--panel);
            color: var(--text);
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            min-width: 40px;
            transition: all 0.2s ease;
        }

        .acc-btn:hover {
            background: var(--panel-2);
            border-color: var(--primary);
        }

        .acc-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .play-btn:hover {
            background: var(--primary-hover, #0056b3);
            transform: translateY(-1px);
        }

        .play-btn:active {
            transform: translateY(0);
        }

        .scale-info-grid {
            font-size: 14px;
        }

        .scale-info-grid span {
            line-height: 1.4;
        }

        #scale-notes-display {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        #scale-notes-display .chip {
            background: var(--panel-2);
            padding: 6px 10px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
        }
    </style>

    <script src="./common-i18n.js?version=6211bf6d914f5682ff4a0e248fac5d6664e35b9f"></script>
    <script src="./common-data.js?version=6211bf6d914f5682ff4a0e248fac5d6664e35b9f"></script>
    <script src="./modulations-library.js?version=6211bf6d914f5682ff4a0e248fac5d6664e35b9f"></script>
    <script src="./theme.js?version=6211bf6d914f5682ff4a0e248fac5d6664e35b9f"></script>
    <script src="./harmony-navigator.js?version=6211bf6d914f5682ff4a0e248fac5d6664e35b9f"></script>
</body>

</html>